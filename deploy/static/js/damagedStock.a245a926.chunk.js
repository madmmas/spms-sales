"use strict";(self.webpackChunkspms_app=self.webpackChunkspms_app||[]).push([[8063],{1811:function(e,t,r){r.d(t,{CN:function(){return v},CZ:function(){return l},D:function(){return E},Eh:function(){return I},GB:function(){return q},H0:function(){return _},Hh:function(){return p},Hn:function(){return C},Id:function(){return g},Ik:function(){return N},K$:function(){return P},LM:function(){return i},MU:function(){return n},Ni:function(){return f},Q4:function(){return R},R$:function(){return m},UR:function(){return b},VB:function(){return h},VC:function(){return o},W9:function(){return T},aF:function(){return x},eQ:function(){return w},ev:function(){return y},fs:function(){return k},if:function(){return F},it:function(){return s},kj:function(){return d},q$:function(){return a},qI:function(){return S},s5:function(){return j},sf:function(){return u},sk:function(){return Z},uG:function(){return A},vN:function(){return D},vY:function(){return c}});var n="dtBank",a="dtBankAccount",i="dtCash",l="dtCustomer",o="dtEmployee",s="dtEmploymentHistory",u="dtProduct",d="dtSupplier",c="dtWarehouse",f="dtStock",m="trxDamagedStock",h="trxStockAdjustment",p="trxExpense",x="trxExtraIncome",y="trxPurchase",g="trxSales",b="trxStockIn",j="trxStockOut",P="trxACRecievable",v="trxACPayable",S="trxBankRegister",N="trxCashRegister",C="trxPayment",k="dtCustomerCategory",F="dtDepartment",w="dtDesignation",R="dtExpenseType",D="dtExtraIncomeType",q="dtGrade",E="dtGroup",T="dtOfficeTime",Z="dtPaymentType",A="dtProductCategory",_="dtRoute",I="dtSupplierCategory"},3999:function(e,t,r){r.r(t);var n=r(1413),a=r(9439),i=r(2426),l=r(2791),o=r(9195),s=r(7890),u=r(919),d=r(5854),c=r(1063),f=r(4286),m=r(7145),h=r(8218),p=r(989),x=r(7580),y=r(8291),g=r(7193),b=r(9565),j=r(1811),P=r(9615),v=r(184);t.default=function(){var e=j.R$,t={date:Date.now(),dtProduct_id:null,quantity:0,details:""},r=(0,l.useRef)(null),S=(0,l.useRef)(null),N=(0,l.useRef)(null),C=(0,l.useRef)(null),k={fields:[],first:0,rows:10,page:1,sortField:null,sortOrder:null,filters:{name:{operator:s.pg.OR,constraints:[{value:null,matchMode:s.a6.STARTS_WITH}]}}},F=(0,l.useState)(!1),w=(0,a.Z)(F,2),R=w[0],D=w[1],q=(0,l.useState)(0),E=(0,a.Z)(q,2),T=E[0],Z=E[1],A=(0,l.useState)(null),_=(0,a.Z)(A,2),I=_[0],B=_[1],L=(0,l.useState)(k),M=(0,a.Z)(L,2),O=M[0],z=M[1],Q=(0,l.useState)(!1),W=(0,a.Z)(Q,2),H=W[0],K=W[1],V=(0,l.useState)(!1),G=(0,a.Z)(V,2),Y=G[0],$=G[1],U=new b.p,J=(0,o.cI)({defaultValues:t}),X=(J.register,J.control),ee=J.formState.errors,te=J.resetField,re=J.handleSubmit;(0,l.useEffect)((function(){ae()}),[]);var ne=function(){ae()},ae=function(){z(k)};(0,l.useEffect)((function(){ie()}),[O]);var ie=function(){D(!0),U.getAll(e,{params:JSON.stringify(O)}).then((function(e){console.log(e),Z(e.total),B(e.rows),D(!1)}))},le=function(){S.current.exportCSV()},oe=function(e){console.log("PRODUCT SELECTED::",e),N.current.focus()},se=function(){te("dtProduct_id"),te("quantity"),te("details"),$(!1)},ue=function(e){return ee[e]&&(0,v.jsx)("small",{className:"p-error",children:ee[e].message})},de=function(){K(!1)},ce=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.z,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:de}),(0,v.jsx)(u.z,{disabled:Y,label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:re((function(e){return function(e){if($(!0),!(N.current.value<1)){var t={dtProduct_id:e.dtProduct_id,quantity:e.quantity,details:e.details};console.log(t),U.processTransaction(P.PC,t).then((function(e){console.log(e),e.success?(r.current.show({severity:"success",summary:"Successful",detail:"Damaged Stock Added",life:3e3}),se(),K(!1),ie()):r.current.show({severity:"error",summary:"Error",detail:e.message,life:3e3})}))}}(e)}))})]});return(0,v.jsx)("div",{className:"grid crud-demo",children:(0,v.jsx)("div",{className:"col-12",children:(0,v.jsxs)("div",{className:"card",children:[(0,v.jsx)(x.F,{ref:r}),(0,v.jsx)(y.o,{className:"mb-4",left:function(){return(0,v.jsx)(l.Fragment,{children:(0,v.jsx)(u.z,{onClick:function(){return se(),void K(!0)},className:"p-button p-button-primary mr-2",label:"Add Damaged Stock"})})},right:function(){return(0,v.jsx)(l.Fragment,{children:(0,v.jsx)(u.z,{label:"Export",icon:"pi pi-upload",className:"p-button-help",onClick:le})})}}),(0,v.jsxs)(m.w,{ref:S,value:I,dataKey:"_id",className:"datatable-responsive",responsiveLayout:"scroll",lazy:!0,loading:R,rows:O.rows,onSort:function(e){var t=(0,n.Z)((0,n.Z)({},O),e);z(t)},sortField:O.sortField,sortOrder:O.sortOrder,onFilter:function(e){var t=(0,n.Z)((0,n.Z)({},O),e);t.first=0,z(t)},filters:O.filters,filterDisplay:"menu",scrollable:!0,columnResizeMode:"expand",resizableColumns:!0,showGridlines:!0,paginator:!0,totalRecords:T,onPage:function(e){var t=(0,n.Z)((0,n.Z)({},O),e);z(t)},first:O.first,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",emptyMessage:"No data found.",header:function(){return(0,v.jsxs)("div",{className:"flex justify-content-between",children:[(0,v.jsx)("h5",{className:"m-0",children:"Damaged Stock"}),(0,v.jsx)(u.z,{type:"button",icon:"pi pi-filter-slash",label:"Refresh",className:"p-button-outlined",onClick:ne})]})},children:[(0,v.jsx)(c.s,{field:"date",header:"Transaction Datetime",filter:!0,filterPlaceholder:"Search by name",sortable:!0,body:function(e){return(0,v.jsx)(v.Fragment,{children:(t=e.date,i(parseInt(t)).format("DD/MM/YYYY hh:mm:ss"))});var t},headerStyle:{minWidth:"15rem"}}),(0,v.jsx)(c.s,{field:"dtProduct_id",header:"Product Name",filter:!0,filterPlaceholder:"Search by name",sortable:!0,body:function(e){return(0,v.jsx)(v.Fragment,{children:e.name})},headerStyle:{minWidth:"15rem"}}),(0,v.jsx)(c.s,{field:"quantity",header:"Quantity",filter:!0,filterPlaceholder:"Search by name",sortable:!0,body:function(e){return(0,v.jsx)(v.Fragment,{children:e.quantity})},headerStyle:{minWidth:"15rem"}}),(0,v.jsx)(c.s,{field:"details",header:"Details",filter:!0,filterPlaceholder:"Search by name",sortable:!0,body:function(e){return(0,v.jsx)(v.Fragment,{children:e.details})},headerStyle:{minWidth:"15rem"}}),(0,v.jsx)(c.s,{field:"transferBy",header:"Transfer by",filter:!0,filterPlaceholder:"Search by name",sortable:!0,body:function(e){return(0,v.jsx)(v.Fragment,{children:e.transferBy})},headerStyle:{minWidth:"15rem"}})]}),(0,v.jsx)(f.V,{visible:H,style:{width:"450px"},header:"Add Damaged Stock",modal:!0,className:"p-fluid",footer:ce,onHide:de,children:(0,v.jsxs)("div",{className:"p-fluid formgrid grid",children:[(0,v.jsx)("div",{className:"field col-12 md:col-6",children:(0,v.jsx)(o.Qr,{name:"dtProduct_id",control:X,rules:{required:"Product is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{htmlFor:t.name,className:(0,d.AK)({"p-error":ee.value}),children:"Product*"}),(0,v.jsx)(g.Z,{field:t,modelName:j.sf,displayField:"name",className:(0,d.AK)({"p-invalid":r.error}),onSelect:oe,defaultFilters:k,columns:[{field:"name",header:"Product Name",filterPlaceholder:"Filter by Product Name",width:"50rem"},{field:"brandName",header:"Brand Name",filterPlaceholder:"Filter by Barnd Name",width:"15rem"},{field:"modelNo",header:"Model No",filterPlaceholder:"Filter by Model No",width:"15rem"},{field:"partNumber",header:"Part Number",filterPlaceholder:"Filter by Part Number",width:"15rem"},{field:"dtProductCategory_id_shortname",header:"Product Category",filterPlaceholder:"Filter by Product Category",width:"15rem"}]}),ue(t.name)]})}})}),(0,v.jsx)("div",{className:"field col-12 md:col-6",children:(0,v.jsx)(o.Qr,{name:"quantity",control:X,rules:{validate:function(e){return e>0||"Quantity greater than 0 is required"}},render:function(e){var t=e.field,r=e.fieldState;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{htmlFor:"quantity",children:"Quantity*"}),(0,v.jsx)(p.R,{ref:N,inputId:t.name,value:t.value,inputRef:t.ref,onValueChange:function(e){return t.onChange(e)},className:(0,d.AK)({"p-invalid":r.error})}),ue(t.name)]})}})}),(0,v.jsx)("div",{className:"field col-12 md:col-12",children:(0,v.jsx)(o.Qr,{name:"details",control:X,rules:{required:"Details is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{htmlFor:"details",children:"Details*"}),(0,v.jsx)(h.g,{ref:C,inputId:t.name,value:t.value,inputRef:t.ref,keyfilter:"text",className:(0,d.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)},rows:3,cols:20}),ue(t.name)]})}})})]})})]})})})}}}]);
//# sourceMappingURL=damagedStock.a245a926.chunk.js.map