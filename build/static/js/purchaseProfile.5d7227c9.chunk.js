"use strict";(self.webpackChunkspms_app=self.webpackChunkspms_app||[]).push([[4757],{3956:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(9439),a=r(2791),l=r(5103),o=r(1413),i=r(7145),s=r(7890),c=r(1063),u=r(919),d=r(4286),f=r(2516),m=r(184);function p(e){var t=e.trigger,r=e.fieldValue,p=e.onSelect,h=e.modelName,v=e.columns,x=e.showFields,g=void 0===x?[]:x,y=(e.caption,e.dialogHeight),j=void 0===y?"70vh":y,b=e.dialogWidth,N=void 0===b?"80vw":b,_=(0,a.useRef)(null),C={fields:g,first:0,rows:10,page:1,sortField:null,sortOrder:null,filters:{global:{value:null,matchMode:s.a6.CONTAINS}}},S=(0,a.useState)(!1),P=(0,n.Z)(S,2),F=P[0],R=P[1],w=(0,a.useState)(""),T=(0,n.Z)(w,2),E=T[0],Z=T[1],A=(0,a.useState)(0),D=(0,n.Z)(A,2),I=D[0],k=D[1],O=(0,a.useState)(C),K=(0,n.Z)(O,2),U=K[0],B=K[1],z=(0,a.useState)([]),L=(0,n.Z)(z,2),H=L[0],M=L[1],Q=(0,a.useState)({}),q=(0,n.Z)(Q,2),W=q[0],V=(q[1],(0,a.useState)(!1)),X=(0,n.Z)(V,2),Y=X[0],G=X[1],J=new f.D,$=function(){R(!0),J.getAll(h,{params:JSON.stringify(U)}).then((function(e){console.log(e),k(e.total),M(e.rows),R(!1)}))};(0,a.useEffect)((function(){te()}),[]),(0,a.useEffect)((function(){$()}),[U]),(0,a.useEffect)((function(){t&&ee()}),[t]);var ee=function(){B(C),$(),G(!0)},te=function(){B(C),Z("")},re=function(){te()},ne=function(e){var t=(0,o.Z)({},U);console.log(t);var r=e.target.value;Z(r),null!==r&&void 0!==r&&(t.filters.global.value=r,t.first=0,B(t))},ae=function(e){return e._id!==r},le=(0,m.jsxs)("div",{className:"flex justify-content-between",children:[(0,m.jsx)(u.z,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:!0,onClick:re}),(0,m.jsxs)("span",{className:"p-input-icon-left",children:[(0,m.jsx)("i",{className:"pi pi-search"}),(0,m.jsx)(l.o,{value:E,onChange:ne,placeholder:"Keyword Search"})]})]});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.z,{icon:"pi pi-search",className:"p-button-warning",onClick:function(e){e.preventDefault(),ee()}}),(0,m.jsx)(d.V,{visible:Y,header:le,modal:!0,style:{width:N},maximizable:!0,contentStyle:{height:j},onHide:function(){G(!1)},children:(0,m.jsxs)(i.w,{ref:_,value:H,dataKey:"_id",className:"datatable-responsive",responsiveLayout:"scroll",lazy:!0,loading:F,rows:U.rows,onSort:function(e){var t=(0,o.Z)((0,o.Z)({},U),e);B(t)},sortField:U.sortField,sortOrder:U.sortOrder,onFilter:function(e){var t=(0,o.Z)((0,o.Z)({},U),e);t.first=0,B(t)},filterDisplay:"row",filters:U.filters,isDataSelectable:function(e){return!e.data||ae(e.data)},rowClassName:function(e){return ae(e)?"":"p-disabled"},scrollable:!0,scrollHeight:"flex",tableStyle:{minWidth:"50rem"},paginator:!0,totalRecords:I,onPage:function(e){var t=(0,o.Z)((0,o.Z)({},U),e);B(t)},first:U.first,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,15],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} entries",globalFilterFields:["name"],selectionMode:"single",selection:W,onSelectionChange:function(e){!function(e){G(!1),p(e)}(e)},emptyMessage:"No data found.",children:[(0,m.jsx)(c.s,{selectionMode:"single",headerStyle:{width:"3rem"}}),v.map((function(e,t){return(0,m.jsx)(c.s,{field:e.field,header:e.header,filter:!0,filterPlaceholder:e.filterPlaceholder,sortable:!0},t)}))]})})]})}function h(e){var t=e.field,r=e.displayField,o=e.showFields,i=void 0===o?[]:o,s=e.modelName,c=e.className,u=e.columns,d=e.caption,h=void 0===d?"Select":d,v=e.onSelect,x=new f.D,g=(0,a.useState)(""),y=(0,n.Z)(g,2),j=y[0],b=y[1],N=(0,a.useState)(0),_=(0,n.Z)(N,2),C=_[0],S=_[1];(0,a.useEffect)((function(){null!==t.value&&""!==t.value?x.getById(s,t.value).then((function(e){b(e[r])})):b("")}),[t.value]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"p-inputgroup",children:[(0,m.jsx)(l.o,{readonly:"true",value:j,placeholder:h,className:c,onClick:function(){return S((function(e){return e+1}))}}),(0,m.jsx)(l.o,{hidden:!0,inputId:t.name,value:t.value,inputRef:t.ref}),(0,m.jsx)(p,{displayField:r,trigger:C,fieldName:t.name,fieldValue:t.value,fieldRef:t.ref,modelName:s,caption:h,className:c,columns:u,showFields:i,onSelect:function(e){b(e.value[r]),t.onChange(e.value._id),v(e.value)}})]})})}},3942:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(1413),a=r(3433),l=r(9439),o=r(2791),i=r(7689),s=r(9195),c=r(5103),u=r(8218),d=r(919),f=r(7580),m=r(3428),p=r(5854),h=r(4286),v=r(1063),x=r(7145),g=r(3956),y=r(1811),j=r(8998),b=r(2516),N=r(1412),_=r(7890),C=r(989),S=r(7193),P=r(184);function F(e){var t=e.onAdd,r=e.onEdit,a=e.currency,i=e.selectedProduct,u=e.defaultPurchaseProduct,f=e.defaultWarehouse,m={product_id:"",warehouse_id:"",bar_code:"",last_purchase_price:0,qty:1,unit_cost_f:0,totalCostF:0,conversion_rate:1,unit_cost:0,totalCostBDT:0,transport:0,duty_vat:0,netUnitCostBDT:0,netCostBDT:0,discount_profit:0,profit:0,trade_price:0,min_trade_price:0},h=(0,s.cI)({defaultValues:m}),v=(h.register,h.control),x=h.formState.errors,j=h.reset,b=h.setValue,N=h.handleSubmit,F=(0,o.useRef)(null),R=(0,o.useState)(u),w=(0,l.Z)(R,2),T=w[0],E=w[1],Z=(0,o.useState)(!1),A=(0,l.Z)(Z,2),D=(A[0],A[1],(0,o.useState)(!1)),I=(0,l.Z)(D,2),k=I[0],O=I[1];(0,o.useEffect)((function(){b("warehouse_id",f)}),[f]),(0,o.useEffect)((function(){i.product_id&&(j((0,n.Z)({},i)),E(i),console.log("Selected Product :::: ",i),O(!0))}),[i]);var K=function(e){return Math.round(100*(e+Number.EPSILON))/100},U=function(e,t){var r=e.target&&e.target.value||0,a=(0,n.Z)({},T);a["".concat(t)]=r,function(e){e.totalCostF=K(e.unit_cost_f*e.qty),e.unit_cost=K(e.unit_cost_f*e.conversion_rate),e.totalCostBDT=K(e.unit_cost*e.qty),e.netUnitCostBDT=K(e.unit_cost+e.transport/e.qty+e.duty_vat/e.qty),e.netCostBDT=K(e.netUnitCostBDT*e.qty),e.trade_price=K(e.netUnitCostBDT+e.profit),e.min_trade_price=e.trade_price,E(e),b("totalCostF",e.totalCostF),b("unit_cost",e.unit_cost),b("totalCostBDT",e.totalCostBDT),b("netUnitCostBDT",e.netUnitCostBDT),b("netCostBDT",e.netCostBDT),b("trade_price",e.trade_price),b("min_trade_price",e.min_trade_price)}(a),b(t,r)},B=function(e){F.current.focus(),console.log("PRODUCT SELECTED::",e),console.log("DEFAULT PURCHASE PRODUCT:::=>>",u);var t=(0,n.Z)({},u);t.product_id=e.id,t.product_name=e.name,t.bar_code=e.bar_code,t.last_purchase_price=e.last_purchase_price,E(t),console.log("SELECTED __PRODUCT:::=>>",t),console.log("SELECTED PRODUCT:::=>>",T),console.log("SELECTED PRODUCT ID :::=>>",e.id),b("product_id",e.id),b("product_name",e.name),b("warehouse_id",f)},z=function(e){return x[e]&&(0,P.jsx)("small",{className:"p-error",children:x[e].message})},L={fields:["id","name","brand_name","model_no","part_number"],first:0,rows:10,page:1,sortField:null,sortOrder:null,filters:{global:{value:null,matchMode:_.a6.CONTAINS},name:{value:null,matchMode:_.a6.CONTAINS},brandName:{value:null,matchMode:_.a6.CONTAINS},modelNo:{value:null,matchMode:_.a6.CONTAINS},partNumber:{value:null,matchMode:_.a6.CONTAINS}}};return(0,P.jsxs)("div",{className:"p-fluid formgrid grid",children:[(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"product_id",control:v,rules:{required:"Product is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Product*"}),(0,P.jsx)(S.Z,{field:t,modelName:y.sf,displayField:"name",className:(0,p.AK)({"p-invalid":r.error}),onSelect:B,defaultFilters:L,columns:[{field:"name",header:"Product Name",filterPlaceholder:"Filter by Product Name",width:"50rem"},{field:"brand_name",header:"Brand Name",filterPlaceholder:"Filter by Barnd Name",width:"15rem"},{field:"model_no",header:"Model No",filterPlaceholder:"Filter by Model No",width:"15rem"},{field:"part_number",header:"Part Number",filterPlaceholder:"Filter by Part Number",width:"15rem"},{field:"category_name",header:"Product Category",filterPlaceholder:"Filter by Product Category",width:"15rem"}]}),z(t.name)]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"warehouse_id",control:v,rules:{required:"Warehouse is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Warehouse*"}),(0,P.jsx)(g.Z,{field:t,modelName:y.vY,displayField:"name",className:(0,p.AK)({"p-invalid":r.error}),columns:[{field:"name",header:"Warehouse",filterPlaceholder:"Filter by Warehouse"}]}),z(t.name)]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"bar_code",control:v,render:function(e){var t=e.field;e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Barcode"}),(0,P.jsx)(c.o,{inputId:t.name,value:t.value,inputRef:t.ref,disabled:!0}),z(t.name)]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"last_purchase_price",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Last Purchase Price"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"qty",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Quantity"}),(0,P.jsx)(C.R,{ref:F,onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"qty")},min:1,max:1e7})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"unit_cost_f",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:["Unit Cost (",a,")"]}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"unit_cost_f")},maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"totalCostF",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:["Total Cost (",a,")"]}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"conversion_rate",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Conversion Rate"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"conversion_rate")},min:1,maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"unit_cost",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Unit Cost"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"totalCostBDT",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Total Cost"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"transport",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Transport"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"transport")},min:0,maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"duty_vat",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Duty"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"duty_vat")},maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"netUnitCostBDT",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Net Unit Cost"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"netCostBDT",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Net Cost"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),disabled:!0})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"discount_profit",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Profit (%)"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return function(e){var t=(0,n.Z)({},T);t.discount_profit=K(e),t.profit=t.netUnitCostBDT*K(e)/100,t.trade_price=K(t.netUnitCostBDT+t.profit),t.min_trade_price=t.trade_price,E(t),b("profit",t.profit),b("discount_profit",t.discount_profit),b("trade_price",t.trade_price),b("min_trade_price",t.min_trade_price)}(e.value)}})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"profit",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Unit Profit"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return function(e){var t=(0,n.Z)({},T);t.profit=K(e),t.discount_profit=K(t.profit/t.netUnitCostBDT*100),t.trade_price=K(t.netUnitCostBDT+t.profit),t.min_trade_price=t.trade_price,E(t),b("profit",t.profit),b("discount_profit",t.discount_profit),b("trade_price",t.trade_price),b("min_trade_price",t.min_trade_price)}(e.value)},maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"trade_price",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":x.value}),children:"Unit Trade Price"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return function(e){var t=(0,n.Z)({},T);t.trade_price=K(e),t.profit=K(t.trade_price-t.netUnitCostBDT),t.discount_profit=K(t.profit/t.netUnitCostBDT*100),t.min_trade_price=t.trade_price,E(t),b("trade_price",t.trade_price),b("profit",t.profit),b("discount_profit",t.discount_profit),b("min_trade_price",t.min_trade_price)}(e.value)},maxFractionDigits:2})]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-2",children:(0,P.jsx)(s.Qr,{name:"min_trade_price",control:v,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:"min_trade_price",children:"Min Trade Price (U)"}),(0,P.jsx)(C.R,{onFocus:function(e){return e.target.select()},inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onValueChange:function(e){return U(e,"min_trade_price")},maxFractionDigits:2})]})}})}),(0,P.jsxs)("div",{className:"flex field col-12 md:col-4 align-items-center",children:[k&&(0,P.jsx)(d.z,{label:"Update",className:"p-button-primary mr-2",onClick:N((function(e){return t=e,console.log(t),r(t),O(!1),void j((0,n.Z)({},m));var t}))}),k&&(0,P.jsx)(d.z,{label:"Cancel",className:"p-button-warning",onClick:function(){return O(!1),void j((0,n.Z)({},m))}}),!k&&(0,P.jsx)(d.z,{type:"submit",label:"Add Product",className:"mt-2",onClick:N((function(e){return r=e,console.log(r),j((0,n.Z)({},m)),void t(r);var r}))})]})]})}var R=function(e){var t=e.purchases,r=e.supplierCurrency,n=e.onEdit,a=e.onDelete,i=e.onReturnItem,s=e.editMode,c=void 0===s||s,u=e.returnMode,f=void 0!==u&&u,m=(0,o.useState)(0),p=(0,l.Z)(m,2),h=p[0],g=p[1],y=(0,o.useState)(0),j=(0,l.Z)(y,2),b=j[0],N=j[1],_=(0,o.useState)(0),C=(0,l.Z)(_,2),S=C[0],F=C[1],R=(0,o.useState)(0),w=(0,l.Z)(R,2),T=w[0],E=w[1],Z=(0,o.useState)(0),A=(0,l.Z)(Z,2),D=A[0],I=A[1],k=(0,o.useState)(0),O=(0,l.Z)(k,2),K=O[0],U=O[1];(0,o.useEffect)((function(){console.log("HELOO:::",t),function(e){console.log("CALCULATE-PURCHASES::",e);var r=0,n=0,a=0,l=0,o=0;if(e&&e.length>0)for(var i=0;i<e.length;i++)r+=e[i].totalCostF,n+=e[i].totalCostBDT,a+=e[i].transport,l+=e[i].duty,o+=e[i].netCostBDT;F(t.length),N(n),g(r),E(a),I(l),U(o),console.log("ALL-TOTAL::",S,r,n,a,l,o)}(t)}),[t]);var B=(0,P.jsx)("table",{className:"col-12",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("b",{children:"Total Quantity:"})}),(0,P.jsxs)("td",{children:[t?t.length:0," products."]}),(0,P.jsx)("td",{children:(0,P.jsxs)("b",{children:["Total Cost (",r,"):"]})}),(0,P.jsx)("td",{children:h}),(0,P.jsx)("td",{children:(0,P.jsx)("b",{children:"Total Cost:"})}),(0,P.jsx)("td",{children:b})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)("b",{children:"Total Transport Cost:"})}),(0,P.jsx)("td",{children:T}),(0,P.jsx)("td",{children:(0,P.jsx)("b",{children:"Total Duty:"})}),(0,P.jsx)("td",{children:D}),(0,P.jsx)("td",{children:(0,P.jsx)("b",{children:"Total Net Cost:"})}),(0,P.jsx)("td",{children:K})]})]})});return(0,P.jsxs)(x.w,{value:t,stripedRows:!0,showGridlines:!0,scrollable:!0,scrollHeight:"25rem",header:B,children:[(0,P.jsx)(v.s,{body:function(e){return(0,P.jsxs)(P.Fragment,{children:[c&&(0,P.jsx)(d.z,{icon:"pi pi-pencil",className:"p-button-rounded p-button-success mr-2",onClick:function(){return n(e)}}),c&&(0,P.jsx)(d.z,{icon:"pi pi-trash",className:"p-button-rounded p-button-warning",onClick:function(){return a(e)}}),f&&(0,P.jsx)(d.z,{icon:"pi pi-minus",className:"p-button-rounded p-button-warning",onClick:function(){return i(e)}})]})},frozen:!0,headerStyle:{minWidth:"6.4rem"}}),(0,P.jsx)(v.s,{field:"product_name",frozen:!0,header:"Product Name",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"qty",header:"Quantity",headerStyle:{minWidth:"10rem"}}),f&&(0,P.jsx)(v.s,{field:"return_qty",header:"Return Qty",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"unit_cost_f",header:"Unit Cost (".concat(r,")"),headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"totalCostF",header:"Total Cost (".concat(r,")"),headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"conversion_rate",header:"Conversion Rate",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"unit_cost",header:"UnitCost",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"totalCostBDT",header:"Total Cost",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"transport",header:"Transport",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"duty_vat",header:"Duty ",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"netUnitCostBDT",header:"Net Unit Cost",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"netCostBDT",header:"Net Cost",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"discount_profit",header:"Profit Percentage",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"profit",header:"Profit",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"min_trade_price",header:"Minimum Trade Price",headerStyle:{minWidth:"10rem"}}),(0,P.jsx)(v.s,{field:"trade_price",header:"Trade Price (U)",headerStyle:{minWidth:"10rem"}})]})},w=function(e){var t=e.selectedReturnItem,r=e.trigger,n=e.onAddReturnItem,a=(0,o.useState)(!1),i=(0,l.Z)(a,2),c=i[0],f=i[1],m=(0,o.useState)("CASH"),v=(0,l.Z)(m,2),x=(v[0],v[1],(0,o.useState)(0)),g=(0,l.Z)(x,2),y=g[0],j=g[1],b=(0,s.cI)({defaultValues:{return_qty:0,reason:""}}),N=b.control,_=b.formState.errors,S=b.setValue,F=b.handleSubmit;(0,o.useEffect)((function(){}),[t]),(0,o.useEffect)((function(){if(r){S("return_qty",0),S("reason",""),console.log("selectedReturnItem=>>>",t);var e=Number(t.qty)-(Number(t.return_qty)||0);j(e),console.log("validReturnQty",e),R()}}),[r]);var R=function(){f(!0)},w=function(e){return _[e]&&(0,P.jsx)("small",{className:"p-error",children:_[e].message})},T=function(){f(!1)},E=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.z,{label:"Cancel",icon:"pi pi-times",className:"p-button-text",onClick:T}),(0,P.jsx)(d.z,{label:"Save",icon:"pi pi-check",className:"p-button-text",onClick:F((function(e){return r=e,console.log("submitReturnItem",r),n({product_id:t.product_id,product_name:t.product_name,return_qty:r.return_qty,reason:r.reason}),void f(!1);var r}))})]});return(0,P.jsx)(h.V,{visible:c,style:{width:"450px"},header:"ReturnItem",modal:!0,className:"p-fluid",footer:E,onHide:T,children:(0,P.jsxs)("div",{className:"p-fluid formgrid grid",children:[(0,P.jsx)("div",{className:"field col-12 md:col-12",children:(0,P.jsx)(s.Qr,{name:"return_qty",control:N,rules:{validate:function(e){return e>0&&e<=y||"Enter a valid amount."}},render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:"return_qty",children:"Return Quantity*"}),(0,P.jsx)(C.R,{inputId:t.name,value:t.value,inputRef:t.payRef,onValueChange:function(e){return t.onChange(e)},className:(0,p.AK)({"p-invalid":r.error})}),w(t.name)]})}})}),(0,P.jsx)("div",{className:"field col-12 md:col-12",children:(0,P.jsx)(s.Qr,{name:"reason",control:N,rules:{required:"Reason is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:"reason",children:"Reason*"}),(0,P.jsx)(u.g,{inputId:t.name,value:t.value,inputRef:t.payRef,keyfilter:"text",className:(0,p.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)},rows:3,cols:20}),w(t.name)]})}})})]})})},T=function(e){var t=e.purchase,r=(0,i.s0)(),_={product_id:"",warehouse_id:"",bar_code:"",last_purchase_price:0,quantity:1,unit_cost_f:0,totalCostF:0,conversion_rate:1,unit_cost:0,totalCostBDT:0,transport:0,duty_vat:0,netUnitCostBDT:0,netCostBDT:0,discount_profit:0,profit:0,trade_price:0,min_trade_price:0},C=(0,o.useRef)(null),S=(0,o.useState)(0),T=(0,l.Z)(S,2),E=(T[0],T[1]),Z=(0,o.useState)(0),A=(0,l.Z)(Z,2),D=A[0],I=A[1],k=(0,o.useState)(0),O=(0,l.Z)(k,2),K=O[0],U=O[1],B=(0,o.useState)(0),z=(0,l.Z)(B,2),L=z[0],H=z[1],M=(0,o.useState)(0),Q=(0,l.Z)(M,2),q=Q[0],W=Q[1],V=(0,o.useState)(0),X=(0,l.Z)(V,2),Y=X[0],G=X[1],J=(0,o.useState)([]),$=(0,l.Z)(J,2),ee=$[0],te=$[1],re=(0,o.useState)([]),ne=(0,l.Z)(re,2),ae=ne[0],le=ne[1],oe=(0,o.useState)(_),ie=(0,l.Z)(oe,2),se=ie[0],ce=ie[1],ue=(0,o.useState)(!1),de=(0,l.Z)(ue,2),fe=de[0],me=de[1],pe=(0,o.useState)(!1),he=(0,l.Z)(pe,2),ve=he[0],xe=he[1],ge=(0,o.useState)(!1),ye=(0,l.Z)(ge,2),je=ye[0],be=ye[1],Ne=(0,o.useState)("INR"),_e=(0,l.Z)(Ne,2),Ce=_e[0],Se=_e[1],Pe=(0,o.useState)("XXXXX"),Fe=(0,l.Z)(Pe,2),Re=Fe[0],we=Fe[1],Te=(0,o.useState)(""),Ee=(0,l.Z)(Te,2),Ze=Ee[0],Ae=Ee[1],De=(0,o.useState)("draft"),Ie=(0,l.Z)(De,2),ke=Ie[0],Oe=Ie[1],Ke=(0,o.useState)(!0),Ue=(0,l.Z)(Ke,2),Be=Ue[0],ze=Ue[1],Le=(0,o.useState)(!1),He=(0,l.Z)(Le,2),Me=He[0],Qe=He[1],qe=(0,o.useState)({}),We=(0,l.Z)(qe,2),Ve=We[0],Xe=We[1],Ye=(0,o.useState)([]),Ge=(0,l.Z)(Ye,2),Je=Ge[0],$e=Ge[1],et=(0,o.useState)([]),tt=(0,l.Z)(et,2),rt=tt[0],nt=tt[1],at=(0,o.useState)(!1),lt=(0,l.Z)(at,2),ot=lt[0],it=lt[1],st=(0,o.useState)(null),ct=(0,l.Z)(st,2),ut=ct[0],dt=ct[1],ft=new j.p,mt=new b.D,pt=new N.e,ht=(0,s.cI)({defaultValues:{id:null,party_type:"dtSupplier",party_id:null,currency:null,cnf:null,be_no:null,lc_no:null,notes:null}}),vt=ht.reset,xt=ht.control,gt=ht.formState.errors,yt=(ht.setValue,ht.handleSubmit);(0,o.useEffect)((function(){mt.getDefaultItem("dtWarehouse").then((function(e){console.log("DEFAULT WAREHOUSE::",e),dt(e._id)})),null===t||void 0===t?"XXXXX"===Re&&pt.getNextId(y.ev).then((function(e){we(e.nextID),console.log("NEXT ID::",e.nextID)})):(console.log("FETCHED-PURCHASE::",t),vt({id:t.id,party_type:t.party_type,party_id:t.party_id,currency:t.currency,cnf:t.cnf,be_no:t.be_no,lc_no:t.lc_no,notes:t.notes}),Se(t.currency),te(t.items),nt(t.return_items),_t(t.items),we(t.voucher_no),ze("draft"===t.status),Qe("approved"===t.status),console.log("EDIT MODE:::=>",t.status,"draft"===t.status)),console.log("EDIT MODE::",Be)}),[t]);var jt=function(e,t){if("save"===e)Oe("draft"),bt(t);else{if(0===ee.length)return void C.current.show({severity:"error",summary:"Error",detail:"Please add at least one product to purchase",life:3e3});"approve"===e?(Oe("approved"),Ae("Are you sure you want to approve this purchase?")):"cancel"===e&&(Oe("cancelled"),Ae("Are you sure you want to cancel this purchase?")),be(!0),le(t)}},bt=function(e){e.status=ke,e.currency=Ce,e.voucher_no=Re,e.items=ee,e.gross=D,e.transport=L,e.duty_vat=q,e.net=Y,e.due=0,e.paid=Y,console.log("FORMDATA::",e);try{t?"approved"===ke?ft.commit(y.ev,t.id,e).then((function(e){C.current.show({severity:"success",summary:"Successful",detail:"Purchase Record Created",life:3e3}),r("/purchases")})):ft.update(y.ev,t.id,e).then((function(e){C.current.show({severity:"success",summary:"Successful",detail:"Purchase Record Created",life:3e3}),r("/purchases")})):ft.create(y.ev,e).then((function(e){C.current.show({severity:"success",summary:"Successful",detail:"Purchase Record Created",life:3e3}),r("/purchases")}))}catch(n){console.log(n),C.current.show({severity:"error",summary:"Error",detail:"Failed to create Purchase Record!",life:3e3})}},Nt=function(e){return gt[e]&&(0,P.jsx)("small",{className:"p-error",children:gt[e].message})},_t=function(e){console.log("CALCULATE-PURCHASES::",e);var t=0,r=0,n=0,a=0,l=0;if(e&&e.length>0)for(var o=0;o<e.length;o++)t+=e[o].totalCostF,r+=e[o].totalCostBDT,n+=e[o].transport,a+=e[o].duty_vat,l+=e[o].netCostBDT;U(ee?ee.length:0),I(r),E(t),H(n),W(a),G(l),console.log("ALL-TOTAL::",K,t,r,n,a,l)},Ct=function(){xe(!1)},St=function(){me(!1)},Pt=function(){Oe("draft"),be(!1)},Ft=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.z,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:Ct}),(0,P.jsx)(d.z,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:function(){var e=(0,a.Z)(ee);e.splice(se.index,1),te(e),xe(!1)}})]}),Rt=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.z,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:St}),(0,P.jsx)(d.z,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:function(){console.log("COFIRM RETURN ITEMS::",Je),ft.return(y.ev,t.id,Je).then((function(e){C.current.show({severity:"success",summary:"Successful",detail:"Purchase Record Created",life:3e3}),r("/purchases")}))}})]}),wt=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.z,{label:"No",icon:"pi pi-times",className:"p-button-text",onClick:Pt}),(0,P.jsx)(d.z,{label:"Yes",icon:"pi pi-check",className:"p-button-text",onClick:function(){bt(ae)}})]}),Tt=function(e){console.log("SELECTED SUPPLIER::",e),Se(e.currency)};return(0,P.jsxs)("div",{className:"grid h-screen",children:[(0,P.jsx)(f.F,{ref:C}),(0,P.jsx)("div",{className:"col-3",children:(0,P.jsxs)("div",{class:"card",children:[!t&&(0,P.jsx)(d.z,{onClick:function(){r("/purchases")},className:"p-button-outlined",label:"Go to Purchase List"}),(0,P.jsxs)("h5",{children:["Purchase Detail :: VoucherNo (",Re,") ",t&&(0,P.jsx)(m.V,{severity:"warning",value:t.status})]}),(0,P.jsx)("div",{className:" col-12 md:col-12",children:(0,P.jsxs)("div",{className:"p-fluid formgrid grid",children:[(0,P.jsxs)("div",{className:"field col-12",children:[!Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{children:"Supplier Name"}),(0,P.jsx)(c.o,{readonly:"true",value:t.party_id,placeholder:"empty"})]}),Be&&(0,P.jsx)(s.Qr,{name:"party_id",control:xt,rules:{required:"Supplier is required."},render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":gt.value}),children:"Supplier*"}),(0,P.jsx)(g.Z,{field:t,modelName:y.kj,displayField:"name",onSelect:Tt,className:(0,p.AK)({"p-invalid":r.error}),columns:[{field:"name",header:"Supplier Name",filterPlaceholder:"Filter by Supplier Name"}]}),Nt(t.name)]})}})]}),(0,P.jsxs)("div",{className:"field col-12",children:[(0,P.jsx)("label",{htmlFor:"fldSupplierCurrency",children:"Supplier Currency"}),(0,P.jsx)(c.o,{readonly:"true",value:Ce,placeholder:"Currency"})]}),(0,P.jsxs)("div",{className:"field col-12",children:[!Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{children:"CnF"}),(0,P.jsx)(c.o,{readonly:"true",value:t.cnf,placeholder:"empty"})]}),Be&&(0,P.jsx)(s.Qr,{name:"cnf",control:xt,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":gt.value}),children:"CnF"}),(0,P.jsx)(c.o,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)}}),Nt(t.name)]})}})]}),(0,P.jsxs)("div",{className:"field col-12",children:[!Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{children:"B/E No."}),(0,P.jsx)(c.o,{readonly:"true",value:t.be_no,placeholder:"empty"})]}),Be&&(0,P.jsx)(s.Qr,{name:"be_no",control:xt,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":gt.value}),children:"B/E No."}),(0,P.jsx)(c.o,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)}}),Nt(t.name)]})}})]}),(0,P.jsxs)("div",{className:"field col-12",children:[!Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{children:"LC No."}),(0,P.jsx)(c.o,{readonly:"true",value:t.lc_no,placeholder:"empty"})]}),Be&&(0,P.jsx)(s.Qr,{name:"lc_no",control:xt,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":gt.value}),children:"LC No."}),(0,P.jsx)(c.o,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)}}),Nt(t.name)]})}})]}),(0,P.jsxs)("div",{className:"field col-12",children:[!Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{children:"Notes"}),(0,P.jsx)(c.o,{readonly:"true",value:t.notes,placeholder:"empty"})]}),Be&&(0,P.jsx)(s.Qr,{name:"notes",control:xt,render:function(e){var t=e.field,r=e.fieldState;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("label",{htmlFor:t.name,className:(0,p.AK)({"p-error":gt.value}),children:"Notes"}),(0,P.jsx)(u.g,{inputId:t.name,value:t.value,inputRef:t.ref,className:(0,p.AK)({"p-invalid":r.error}),onChange:function(e){return t.onChange(e.target.value)},rows:3,cols:20}),Nt(t.name)]})}})]})]})}),Be&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.z,{type:"submit",label:"Save as Draft",className:"mt-2 m-1",onClick:yt((function(e){return jt("save",e)}))}),(0,P.jsx)(d.z,{type:"submit",label:"Confirm Purchase",className:"mt-2 m-1 p-button-warning",onClick:yt((function(e){return jt("approve",e)}))}),(0,P.jsx)(d.z,{type:"submit",label:"Cancel Purchase",className:"mt-2 m-1 p-button-outlined p-button-warning",onClick:yt((function(e){return jt("cancel",e)}))})]}),Me&&(0,P.jsx)(d.z,{type:"submit",label:"Return Purchases",className:"mt-2 m-1 p-button-outlined p-button-warning",onClick:yt((function(e){0!==Je.length?me(!0):C.current.show({severity:"error",summary:"Error",detail:"Please select at least one item to return",life:3e3})}))})]})}),(0,P.jsxs)("div",{className:"card col-9",children:[Be&&(0,P.jsx)("div",{className:"col-12",children:(0,P.jsx)(F,{defaultWarehouse:ut,onAdd:function(e){return function(e){var t=(0,a.Z)(ee);e.index=ee.length,t.push(e),console.log("NEWPURCHASE::",t),te(t),console.log("PURCHASES::",ee),_t(t)}(e)},onEdit:function(e){return function(e){var t=(0,a.Z)(ee);t[se.index]=e,console.log("EDIT::",e),te(t),_t(t)}(e)},currency:Ce,defaultPurchaseProduct:_,selectedProduct:se})}),(0,P.jsx)("div",{className:"col-12",children:ee&&(0,P.jsx)(R,{editMode:Be,returnMode:Me,onReturnItem:function(e){return t=e,console.log("SELECTED RETURN ITEM::",t),Xe(t),void it((function(e){return e+1}));var t},purchases:ee,supplierCurrency:Ce,onEdit:function(e){return t=e,console.log("EDIT::",t),ce((0,n.Z)({},t)),void console.log("SET SELECTED PRODUCT::",se);var t},onDelete:function(e){xe(!0)}})}),Je&&Je.length>0&&(0,P.jsxs)("div",{className:"col-12",children:[(0,P.jsx)("h5",{children:"New Returns:"}),(0,P.jsxs)(x.w,{value:Je,stripedRows:!0,showGridlines:!0,scrollable:!0,scrollHeight:"25rem",children:[(0,P.jsx)(v.s,{body:function(e){return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(d.z,{icon:"pi pi-trash",className:"p-button-rounded p-button-warning",onClick:function(){return function(e){console.log("DELETE RETURN ITEM::",e);var t=(0,a.Z)(Je);t.splice(e.index,1),$e(t)}(e)}})})},frozen:!0,headerStyle:{minWidth:"6.4rem"}}),(0,P.jsx)(v.s,{field:"product_name",header:"Product Name",sortable:!0}),(0,P.jsx)(v.s,{field:"return_qty",header:"Returned Qty",sortable:!0}),(0,P.jsx)(v.s,{field:"reason",header:"Reason",sortable:!0})]})]}),rt&&rt.length>0&&(0,P.jsxs)("div",{className:"col-12",children:[(0,P.jsx)("h5",{children:"Returned Items:"}),(0,P.jsxs)(x.w,{value:rt,stripedRows:!0,showGridlines:!0,scrollable:!0,scrollHeight:"25rem",children:[(0,P.jsx)(v.s,{field:"product_name",header:"Product Name",sortable:!0}),(0,P.jsx)(v.s,{field:"return_qty",header:"Returned Qty",sortable:!0}),(0,P.jsx)(v.s,{field:"reason",header:"Reason",sortable:!0}),(0,P.jsx)(v.s,{field:"created_at",header:"Returned Date",sortable:!0})]})]}),(0,P.jsx)(h.V,{visible:ve,style:{width:"450px"},header:"Confirm",modal:!0,footer:Ft,onHide:Ct,children:(0,P.jsxs)("div",{className:"flex align-items-center justify-content-center",children:[(0,P.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),(0,P.jsx)("span",{children:"Are you sure you want to delete?"})]})}),(0,P.jsx)(h.V,{visible:fe,style:{width:"450px"},header:"Confirm",modal:!0,footer:Rt,onHide:St,children:(0,P.jsxs)("div",{className:"flex align-items-center justify-content-center",children:[(0,P.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),(0,P.jsx)("span",{children:"Are you sure you want to return these products?"})]})}),(0,P.jsx)(h.V,{visible:je,style:{width:"450px"},header:"Confirm",modal:!0,footer:wt,onHide:Pt,children:(0,P.jsxs)("div",{className:"flex align-items-center justify-content-center",children:[(0,P.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),(0,P.jsxs)("span",{children:["$",Ze]})]})}),(0,P.jsx)(w,{trigger:ot,selectedReturnItem:Ve,onAddReturnItem:function(e){return function(e){console.log("SELECTED RETURN ITEM::",e),e.index=Je.length,e.created_at=new Date;for(var t=0;t<Je.length;t++)if(Je[t].product_id===e.product_id)return void C.current.show({severity:"error",summary:"Error",detail:"Item already added!",life:3e3});$e([].concat((0,a.Z)(Je),[e]))}(e)}})]})]})}},1412:function(e,t,r){r.d(t,{e:function(){return s}});var n=r(4165),a=r(5861),l=r(5671),o=r(3144),i=r(8290),s=function(){function e(){(0,l.Z)(this,e)}return(0,o.Z)(e,[{key:"getNextId",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ZP.get("/nextid/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ZP.get("/data/".concat(t,"/")+r);case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r?Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"):"",e.abrupt("return",i.ZP.get("/data/".concat(t,"?")+a).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAllWithoutParams",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={params:JSON.stringify({rows:100})},a=r?Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"):"",e.abrupt("return",i.ZP.get("/data/".concat(t,"?")+a).then((function(e){return e.data.rows})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ZP.post("/data/".concat(t),r);case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ZP.put("/data/".concat(t,"/")+r,a);case 2:return l=e.sent,console.log(l.data),e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ZP.delete("/data/".concat(t,"/")+r);case 2:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()},8218:function(e,t,r){r.d(t,{g:function(){return c}});var n=r(2791),a=r(8820),l=r(3574),o=r(5854);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}var s={defaultProps:{__TYPE:"InputTextarea",autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},getProps:function(e){return o.gb.getMergedProps(e,s.defaultProps)},getOtherProps:function(e){return o.gb.getDiffProps(e,s.defaultProps)}},c=n.memo(n.forwardRef((function(e,t){var r=s.getProps(e),c=n.useRef(t),u=n.useRef(0),d=function(e){var t=c.current;t&&o.p7.isVisible(t)&&(u.current||(u.current=t.scrollHeight,t.style.overflow="hidden"),(u.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",u.current=t.scrollHeight))},f=c.current&&c.current.value,m=n.useMemo((function(){return o.gb.isNotEmpty(r.value)||o.gb.isNotEmpty(r.defaultValue)||o.gb.isNotEmpty(f)}),[r.value,r.defaultValue,f]);n.useEffect((function(){o.gb.combinedRefs(c,t)}),[c,t]),n.useEffect((function(){r.autoResize&&d(!0)}),[r.autoResize]);var p=o.gb.isNotEmpty(r.tooltip),h=s.getOtherProps(r),v=(0,o.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":r.disabled,"p-filled":m,"p-inputtextarea-resizable":r.autoResize},r.className);return n.createElement(n.Fragment,null,n.createElement("textarea",i({ref:c},h,{className:v,onFocus:function(e){r.autoResize&&d(),r.onFocus&&r.onFocus(e)},onBlur:function(e){r.autoResize&&d(),r.onBlur&&r.onBlur(e)},onKeyUp:function(e){r.autoResize&&d(),r.onKeyUp&&r.onKeyUp(e)},onKeyDown:function(e){r.onKeyDown&&r.onKeyDown(e),r.keyfilter&&a.F.onKeyPress(e,r.keyfilter,r.validateOnly)},onInput:function(e){r.autoResize&&d(),r.onInput&&r.onInput(e);var t=e.target;o.gb.isNotEmpty(t.value)?o.p7.addClass(t,"p-filled"):o.p7.removeClass(t,"p-filled")},onPaste:function(e){r.onPaste&&r.onPaste(e),r.keyfilter&&a.F.onPaste(e,r.keyfilter,r.validateOnly)}})),p&&n.createElement(l.u,i({target:c,content:r.tooltip},r.tooltipOptions)))})));c.displayName="InputTextarea"},375:function(e,t,r){r.d(t,{T:function(){return h}});var n=r(2791),a=r(7890),l=r(3561),o=r(2062),i=r(377),s=r(9022),c=r(9411),u=r(5854);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,i=[],s=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(u){c=!0,a=u}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p={defaultProps:{__TYPE:"OverlayPanel",id:null,dismissable:!0,showCloseIcon:!1,style:null,className:null,appendTo:null,breakpoints:null,ariaCloseLabel:null,transitionOptions:null,onShow:null,onHide:null,children:void 0},getProps:function(e){return u.gb.getMergedProps(e,p.defaultProps)},getOtherProps:function(e){return u.gb.getDiffProps(e,p.defaultProps)}},h=n.forwardRef((function(e,t){var r=p.getProps(e),f=m(n.useState(!1),2),h=f[0],v=f[1],x=n.useRef(""),g=n.useRef(null),y=n.useRef(null),j=n.useRef(!1),b=n.useRef(null),N=n.useRef(null),_=m((0,o.gq)({target:y,overlay:g,listener:function(e,t){var n=t.type;t.valid&&("outside"===n?r.dismissable&&!j.current&&E():E()),j.current=!1},when:h}),2),C=_[0],S=_[1],P=function(e){E(),e.preventDefault()},F=function(e){j.current=!0,i.F.emit("overlay-click",{originalEvent:e,target:y.current})},R=function(){j.current=!0},w=function(e,t){h?(E(),function(e,t){return null!=y.current&&y.current!==(t||e.currentTarget||e.target)}(e,t)&&(y.current=t||e.currentTarget||e.target,setTimeout((function(){T(e,y.current)}),200))):T(e,t)},T=function(e,t){y.current=t||e.currentTarget||e.target,h?k():(v(!0),N.current=function(e){!function(e){return g&&g.current&&!(g.current.isSameNode(e)||g.current.contains(e))}(e.target)&&(j.current=!0)},i.F.on("overlay-click",N.current))},E=function(){v(!1),i.F.off("overlay-click",N.current),N.current=null},Z=function(){g.current.setAttribute(x.current,""),u.P9.set("overlay",g.current,a.ZP.autoZIndex,a.ZP.zIndex.overlay),k()},A=function(){C(),r.onShow&&r.onShow()},D=function(){S()},I=function(){u.P9.clear(g.current),r.onHide&&r.onHide()},k=function(){if(y.current&&g.current){u.p7.absolutePosition(g.current,y.current);var e=u.p7.getOffset(g.current),t=u.p7.getOffset(y.current),r=0;e.left<t.left&&(r=t.left-e.left),g.current.style.setProperty("--overlayArrowLeft","".concat(r,"px")),e.top<t.top&&u.p7.addClass(g.current,"p-overlaypanel-flipped")}};(0,o.nw)((function(){x.current=(0,u.Th)(),r.breakpoints&&function(){if(!b.current){b.current=u.p7.createInlineStyle(a.ZP.nonce);var e="";for(var t in r.breakpoints)e+="\n                    @media screen and (max-width: ".concat(t,") {\n                        .p-overlaypanel[").concat(x.current,"] {\n                            width: ").concat(r.breakpoints[t]," !important;\n                        }\n                    }\n                ");b.current.innerHTML=e}}()})),(0,o.zq)((function(){b.current=u.p7.removeInlineStyle(b.current),N.current&&(i.F.off("overlay-click",N.current),N.current=null),u.P9.clear(g.current)})),n.useImperativeHandle(t,(function(){return{props:r,toggle:w,show:T,hide:E,getElement:function(){return g.current}}}));var O=function(){var e=p.getOtherProps(r),t=(0,u.AK)("p-overlaypanel p-component",r.className,{"p-input-filled":"filled"===a.ZP.inputStyle,"p-ripple-disabled":!1===a.ZP.ripple}),o=function(){if(r.showCloseIcon){var e=r.ariaCloseLabel||(0,a.qJ)("close");return n.createElement("button",{type:"button",className:"p-overlaypanel-close p-link",onClick:P,"aria-label":e},n.createElement("span",{className:"p-overlaypanel-close-icon pi pi-times","aria-hidden":"true"}),n.createElement(c.H,null))}return null}();return n.createElement(l.K,{nodeRef:g,classNames:"p-overlaypanel",in:h,timeout:{enter:120,exit:100},options:r.transitionOptions,unmountOnExit:!0,onEnter:Z,onEntered:A,onExit:D,onExited:I},n.createElement("div",d({ref:g,id:r.id,className:t,style:r.style},e,{onClick:F}),n.createElement("div",{className:"p-overlaypanel-content",onClick:R,onMouseDown:R},r.children),o))}();return n.createElement(s.h,{element:O,appendTo:r.appendTo})}));h.displayName="OverlayPanel"},3428:function(e,t,r){r.d(t,{V:function(){return u}});var n=r(2791),a=r(5854);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function s(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0},getProps:function(e){return a.gb.getMergedProps(e,c.defaultProps)},getOtherProps:function(e){return a.gb.getDiffProps(e,c.defaultProps)}},u=n.forwardRef((function(e,t){var r,o=c.getProps(e),i=n.useRef(null),u=c.getOtherProps(o),d=(0,a.AK)("p-tag p-component",(s(r={},"p-tag-".concat(o.severity),null!==o.severity),s(r,"p-tag-rounded",o.rounded),r),o.className),f=a.Cz.getJSXIcon(o.icon,{className:"p-tag-icon"},{props:o});return n.useImperativeHandle(t,(function(){return{props:o,getElement:function(){return i.current}}})),n.createElement("span",l({ref:i,className:d,style:o.style},u),f,n.createElement("span",{className:"p-tag-value"},o.value),n.createElement("span",null,o.children))}));u.displayName="Tag"}}]);
//# sourceMappingURL=purchaseProfile.5d7227c9.chunk.js.map